<html>   
    <head>    
        <title>添加设备申请</title> 
<script>
    function check(f){
        if( f.kind1.value == '' ){
            alert("请输入类别!")
            return false;
        }
        if( f.name.value == '' ){
            alert("请输入名字!")
            return false;
        }
        var reg = /^(\d{4})-(\d{2})-(\d{2})$/;  
        var str = f.date.value;  
        var arr = reg.exec(str);  
        if (str=="") return false;  
        if (!reg.test(str)|| RegExp.$2 > 12 || RegExp.$3 > 31){  
            alert("请保证输入的日期格式为yyyy-mm-dd或正确的日期!");  
            return false;  
        }
        if (f.price.value == ''){
            alert("请输入价格!");  
            return false;
            }
        if( f.formatx.value == '' ){
            alert("请输入规格!")
            return false;
        }
        if (f.amount.value == ''){
            alert("请输入数量!");  
            return false;
            }
        if( f.reason.value == '' ){
            alert("请输入理由!")
            return false;
        }
        var regExp=/^\d+(\.\d+)?$/;
        var reg1=/^[0-9]*[1-9][0-9]*$/;
        var elementTxt=f.price.value;
        var elementTxt1=f.amount.value;
        if(!regExp.test (elementTxt))
        {
            alert("价格请输入数字!");  
            return false;
        }
        else if(!reg1.test (elementTxt1))
        {
            alert("数量请输入正整数!");  
            return false;
        }
        else if(parseInt(elementTxt1) > 1 && parseFloat(elementTxt) > 1000)
        {
            alert("该种设备价值大于1000，请勿批量添加");  
            return false;
        }
    }
    function setdate()
    {
        var dd = new Date();
        var mon = dd.getUTCMonth()+1;
            if(mon < 10)
                mon = "0"+mon;
        var year = dd.getUTCFullYear();
        var day = dd.getUTCDate();
        document.getElementById("dateShow").value = year+"-"+mon+"-"+day;
    }
</script>
    </head>   
    <body align="center" background="/media/Images/back.jpg">
    <p align="center"><font size="6" face="楷体" color="blue">欢迎你，{{Userkind}}资产管理人{{Username}}</font></p>
    <p align="center"><a href="/search_device">返回</a></p>
    <p align="center"> 添加设备：</p>
<form method="post" onsubmit="return check(this)">
<table border=1 align="center" background="/media/Images/formback.jpg">
 <tr>
  <tr><td>类别</td><td>
  {% if level == "3" %}
  <select name="kind1"  id="parent" onchange="clickOpt()">
    <option value=''>请选择</option>
    <option value='03'>X射线仪器</option>
    <option value='04'>光谱仪器</option>   
    <option value='05'>色谱仪器</option> 
    <option value='06'>波谱仪器</option> 
    <option value='07'>电化学仪器</option> 
    <option value='08'>生化分离分析仪器</option> 
    <option value='09'>气体分析仪器</option>  
    <option value='10'>显微镜及图像仪</option>
    <option value='11'>化学反应及熟分析仪器</option> 
    <option value='12'>声学振动仪器</option> 
    <option value='13'>力学性能测试仪器</option> 
    <option value='14'>光电测量仪器</option> 
    <option value='15'>电子光学仪器</option> 
    <option value='16'>材料加工设备及分析仪器</option> 
    <option value='17'>航测及大地测量仪</option> 
    <option value='18'>天文观测仪器设备</option> 
    <option value='19'>海洋仪器及科考船</option> 
    <option value='20'>气象仪器</option>  
    <option value='21'>地震仪器</option> 
    <option value='22'>环境监测仪器</option> 
    <option value='23'>电子仪器、设备</option> 
    <option value='24'>核仪器、设备</option> 
    <option value='25'>医疗仪器</option> 
    <option value='26'>航天仪器</option> 
    <option value='27'>农、林仪器、设备</option> 
    <option value='28'>能源、交通、水利仪器、设备</option> 
    <option value='29'>计量仪器、设备</option> 
    <option value='30'>工程试验装置</option>
    <option value='31'>机械制造仪器</option>
    <option value='32'>离子光学仪器</option>  
    <option value='33'>其他</option> 
  </select>
  <select name="kind2" id="child"></select>
  {% elif level == "2" %}
  <select name="kind1"  id="parent" onchange="clickOpt()">
    <option value=''>请选择</option>
    <option value='02'>家具</option>
  </select>
  <select name="kind2" id="child"></select>
  {% elif level == "1" %}
  <select name="kind1"  id="parent" onchange="clickOpt()">
    <option value=''>请选择</option>
    <option value='01'>计算机及网络设备</option>
  </select>
  <select name="kind2" id="child"></select>
  {% endif %}
  </td></tr>
  <tr><td>名字</td><td><input name="name" type="text"></td></tr>
  <tr><td>日期</td><td><input name="date" type="date" id="dateShow" value=""><input type="button" onClick="setdate()" value="今日" align="right"></td></tr>
  <tr><td>单价(￥)（单价大于1000的设备请勿批量添加）</td><td><input name="price" type="text"></td></tr>
  <tr><td>规格</td><td><input name="formatx" type="text"></td></tr>
  <tr><td>数量</td><td><input name="amount" type="text"></td></tr>
  <tr><td>增加理由</td><td><textarea rows="10" cols="30" type="text" name="reason" value="输入理由" maxlength=200></textarea></td></tr>
  <tr><td><input type="submit" name="search" value="提交申请"> <input type="reset" value="重填"></td></tr>
 </tr>
</table>
</form>
</body>
<script type="text/javascript">
    var child = document.getElementById("child");
    var c_length = child.options.length;
    if(c_length > 0)
        for (var i = 0; i < c_length; i++)
        {
            child.options.remove(0);
        }
    function addOption(val, txt)
    {
        var opt = document.createElement("option");
        opt.text =  txt;
        opt.value = val;
        child.options.add(opt);
    }

    function clickOpt()
    {
        var parent = document.getElementById("parent");
        var p_value =  parent.value;

        var child = document.getElementById("child");
        var c_length = child.options.length;
        if(c_length > 0)
        {
            for(var i = 0; i < c_length; i++)
            {
                child.options.remove(0);
            }
        }
        if(p_value == "01")
        {
            addOption("10", "计算机及服务器");
            addOption("20", "网络设备");
            addOption("30", "其他");
        }
        else if(p_value == "02")
        {
            addOption("10", "桌子");
            addOption("20", "椅子");
            addOption("30", "其他");
        }
        else if(p_value == "03")
        {
            addOption("10", "X衍射仪");
            addOption("20", "X荧光光谱仪");
            addOption("30", "X射线能谱仪");
            addOption("40", "其他");
        }
        else if(p_value == "04")
        {
            addOption("10", "红外分光光度计");
            addOption("20", "紫外分光光度计");
            addOption("30", "原子吸收分光光度计");
            addOption("40", "激光光谱仪");
            addOption("50", "原子发射光谱仪");
            addOption("60", "拉曼光谱仪");
            addOption("70", "其他");
            addOption("0", "");
        }
        else if(p_value == "05")
        {
            addOption("10", "气相色谱仪");
            addOption("20", "液相色谱仪");
            addOption("30", "毛细管电泳仪");
            addOption("40", "薄层扫擂色谱仪");
            addOption("50", "离子色谱仪");
            addOption("60", "其他");
        }
        else if(p_value == "06")
        {
            addOption("10", "顺磁共振波谱仪");
            addOption("20", "磁核共振波谱仪");
            addOption("30", "其他");
        }
        else if(p_value == "07")
        {
            addOption("10", "其他");
        }
        else if(p_value == "08")
        {
            addOption("10", "离心机");
            addOption("20", "氨基酸与多肽分析仪");
            addOption("30", "DNA测序仪");
            addOption("40", "DNA合成仪");
            addOption("50", "PCR仪");
            addOption("60", "流式细胞仪");
            addOption("70", "酶标仪");
            addOption("80", "其他");  
        }

        else if(p_value == "09")
        {
            addOption("10", "其他");
        }
        else if(p_value == "10")
        {
            addOption("10", "光学显微镜");
            addOption("20", "图像分析仪器");
            addOption("30", "其他");
        }
        else if(p_value == "11")
        {
            addOption("10", "反应器");
            addOption("20", "热分析仪");
            addOption("30", "其他");
        }
        else if(p_value == "12")
        {
            addOption("10", "声学仪器");
            addOption("20", "振动仪器");
            addOption("30", "其他");
        }
        else if(p_value == "13")
        {
            addOption("10", "材料试验机");
            addOption("20", "其他");
        }
        else if(p_value == "14")
        {
            addOption("10", "激光器");
            addOption("20", "化学发光检测系统");
            addOption("30", "其他");
        }
        else if(p_value == "15")
        {
            addOption("10", "透射电镜");
            addOption("20", "扫描电镜");
            addOption("30", "电子探针");
            addOption("40", "电子能谱仪");
            addOption("50", "其他");
        }
        else if(p_value == "16")
        {
            addOption("10", "材料生长、镀膜设备");
            addOption("20", "刻蚀设备");
            addOption("30", "材料性能分析仪");
            addOption("40", "其他");
        }
        else if(p_value == "17")
        {
            addOption("10", "其他");
        }
        else if(p_value == "18")
        {
            addOption("10", "其他");
        }
        else if(p_value == "19")
        {
            addOption("10", "其他");
        }
        else if(p_value == "20")
        {
            addOption("10", "其他");
        }else if(p_value == "21")
        {
            addOption("10", "其他");
        }else if(p_value == "22")
        {
            addOption("10", "其他");
        }else if(p_value == "23")
        {
            addOption("10", "电子仪器");
            addOption("20", "通讯设备");
        }else if(p_value == "24")
        {
            addOption("10", "其他");
        }else if(p_value == "25")
        {
            addOption("10", "其他");
        }else if(p_value == "26")
        {
            addOption("10", "其他");
        }else if(p_value == "27")
        {
            addOption("10", "其他");
        }else if(p_value == "28")
        {
            addOption("10", "其他");
        }else if(p_value == "29")
        {
            addOption("10", "其他");
        }else if(p_value == "30")
        {
            addOption("10", "其他");
        }else if(p_value == "31")
        {
            addOption("10", "其他");
        }else if(p_value == "32")
        {
            addOption("10", "有机质谱");
            addOption("20", "无机质谱");
            addOption("30", "同位素质谱");
            addOption("40", "离子探针");
            addOption("50", "其他");
        }else if(p_value == "33")
        {
            addOption("10", "其他");
        }
    }
</script>
</html>